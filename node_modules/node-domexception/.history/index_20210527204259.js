// Check if the DOMException global object is not defined
if (!globalThis.DOMException) {
  // Import the MessageChannel class from the worker_threads module
  const { MessageChannel } = require('worker_threads')

  // Create a new MessageChannel and obtain its port1
  const port = new MessageChannel().port1

  // Create a new ArrayBuffer
  const ab = new ArrayBuffer()

  // Attempt to send the ArrayBuffer through the message port
  try {
    port.postMessage(ab, [ab, ab])
  } catch (err) {
    // If an error occurs, assign the error constructor to the DOMException global object
    globalThis.DOMException = err.constructor
  }
}

// Export the module (assuming that the export statement was left out of the provided code snippet)
module.exports
