/*!
 * node-DOMException
 * 
 * MIT License
 * Jimmy WÃ¤rting <https://jimmy.warting.se/opensource>
 * 
 * This code exports the DOMException constructor for Node.js environments.
 */

if (!globalThis.DOMException) {
  // Check if the DOMException constructor is already available in the globalThis object.
  try {
    const { MessageChannel } = require('worker_threads'),
          // Import the MessageChannel class from the worker_threads module.
          port = new MessageChannel().port1,
          // Create a new MessageChannel and get the first port.
          ab = new ArrayBuffer();
          // Create a new ArrayBuffer.
        
    port.postMessage(ab, [ab, ab]);
    // Post the ArrayBuffer to the other end of the channel.
    // This will trigger a DOMException in some environments.
  } catch (err) {
    console.log(err.code, err.name, err.message);
    // Log the error's code, name, and message.
    
    if (err.constructor.name === 'DOMException') {
      // If the error is a DOMException, set the global DOMException constructor.
      globalThis.DOMException = err.constructor;
    }
  }
}

module.exports = globalThis.DOMException;
// Export the global DOMException constructor.
