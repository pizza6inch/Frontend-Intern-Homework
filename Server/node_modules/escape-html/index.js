/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */

'use strict';

/**
 * Module variables. These variables are private to this module.
 * @private
 */

// Regular expression to match special characters in HTML
var matchHtmlRegExp = /["'&<>]/;

/**
 * Module exports. This is the function that will be exposed as the module.
 * @public
 */

module.exports = escapeHtml;

/**
 * Escape special characters in the given string of html.
 *
 * @param  {string} string The string to escape for inserting into HTML
 * @return {string} The escaped string
 * @public
 */

// The main function that escapes special characters in the given string
function escapeHtml(string) {
  var str = '' + string; // Convert the input to a string
  var match = matchHtmlRegExp.exec(str); // Match special characters using the regular expression

  if (!match) { // If no special characters are found
    return str; // Return the original string
  }

  var escape; // Variable to store the escaped character
  var html = ''; // Variable to store the escaped string
  var index = 0; // Index to keep track of the current position in the string
  var lastIndex = 0; // Index to keep track of the last index that was processed

  for (index = match.index; index < str.length; index++) { // Loop through the string
    switch (str.charCodeAt(index)) { // Determine the escaped character based on the ASCII code
      case 34: // "
        escape = '&quot;';
        break;
      case 38: // &
        escape = '&amp;';
        break;
      case 39: // '
        escape = '&#39;';
        break;
      case 60: // <
        escape = '&lt;';
        break;
      case 62: // >
        escape = '&gt;';
        break;

