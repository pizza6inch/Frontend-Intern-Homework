/*!
  * node-DOMException
  * 
  * MIT License
  * 
  * Jimmy WÃ¤rting <https://jimmy.warting.se/opensource>
  * 
  * This module exports the DOMException constructor, which is a part of the DOM (Document Object Model) API.
  * It first checks if the constructor is already available in the global scope, and if not, it attempts to create it.
  * The constructor is then exported using the module.exports syntax.
  */

if (!globalThis.DOMException) {
  // If the DOMException constructor is not available in the global scope...

  try {
    // ...
    // Attempt to create a new MessageChannel from the worker_threads module
    // and use it to post an ArrayBuffer to the other end of the channel.
    // This is done to trigger the creation of the DOMException constructor
  } catch (err) {
    // If an error occurs during the process...

    console.log(err.code, err.name, err.message)

    // ...check if the constructor was created successfully
    // (i.e. if the error was a DOMException).
    // If it was, save the constructor to the global scope.
    err.constructor.name === 'DOMException' && (
      globalThis.DOMException = err.constructor
    )
  }
}


