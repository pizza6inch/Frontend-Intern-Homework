/*!
 * node-DOMException
 * MIT License
 * Jimmy WÃ¤rting <https://jimmy.warting.se/opensource>
 *
 * This module exports the DOMException constructor, which is a part of the DOM (Document Object Model) API.
 * It first checks if the DOMException constructor is already available in the global this object (globalThis).
 * If it's not available, the code attempts to create a MessageChannel from the worker_threads module and post an ArrayBuffer to it.
 * This is done to check if the environment supports the DOMException constructor.
 * If the DOMException constructor is found in the error thrown during this process, it is assigned to the global this object.
 */

if (!globalThis.DOMException) {
  try {
    const { MessageChannel } = require('worker_threads'),
    port = new MessageChannel().port1,
    ab = new ArrayBuffer()
    port.postMessage(ab, [ab, ab])
  } catch (err) {
    err.constructor.name === 'DOMException' && (
      globalThis.DOMException = err.constructor
    )
  }
}

module.exports = globalThis.DOMException

