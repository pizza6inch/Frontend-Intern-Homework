// Function to add query parameters to a URL
function addQueryParameters(url, parameters) {
  // Check if the URL already contains a '?' and set the separator accordingly
  const separator = /\?/.test(url) ? "&" : "?";

  // Get the keys of the parameters object
  const names = Object.keys(parameters);

  // If there are no parameters, return the original URL
  if (names.length === 0) {
    return url;
  }

  // Construct the query string by iterating over the parameters
  return url + separator + names.map((name) => {
    // If the parameter name is 'q', encode the value as a space-separated string
    if (name === "q") {
      return "q=" + parameters.q.split("+").map(encodeURIComponent).join("+");
    }

    // Otherwise, encode the parameter name and value
    return `${name}=${encodeURIComponent(parameters[name])}`;
  }).join("&");
}

// Export the function for use in other modules
export {
  addQueryParameters
};
