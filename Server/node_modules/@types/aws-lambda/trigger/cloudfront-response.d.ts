// Import necessary types from the "common/cloudfront" module.
import { CloudFrontEvent, CloudFrontRequest, CloudFrontResponse, CloudFrontResultResponse } from "../common/cloudfront";

// Define the types for CloudFront response handlers and callbacks.
export type CloudFrontResponseHandler = Handler<CloudFrontResponseEvent, CloudFrontResponseResult>;
export type CloudFrontResponseCallback = Callback<CloudFrontResponseResult>;

/**
 * The `CloudFrontResponseEvent` interface represents a CloudFront viewer response or origin response event.
 * This event structure is documented in the AWS CloudFront Developer Guide:
 * https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/lambda-event-structure.html#lambda-event-structure-response
 */
export interface CloudFrontResponseEvent {
    // An array of records, where each record contains the CloudFront event and response information.
    Records: Array<{
        // The CloudFront event and response information.
        cf: CloudFrontEvent & {
            // The request object, containing a subset of properties from the `CloudFrontRequest` type.
            readonly request: Pick<CloudFrontRequest, Exclude<keyof CloudFrontRequest, "body">>;
            // The response object, containing the response from CloudFront.
            response: CloudFrontResponse;
        };
    }>;
}

// Define the type for the result of a CloudFront response handler.
export type CloudFrontResponseResult = undefined | null | CloudFrontResultResponse;
